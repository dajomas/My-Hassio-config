  alias: Welkom allemaal, sonos paused
  initial_state: 'on' 
  hide_entity: false
  trigger:
    platform: state
    entity_id: binary_sensor.keuken_6_3
    to: 'on'
    for:
      seconds: 3
  condition:
    condition: and
    conditions:
      - condition: state
        entity_id: input_boolean.martine_komt_thuis
        state: 'on'
      - condition: state
        entity_id: input_boolean.giel_komt_thuis
        state: 'on'
      - condition: template
        value_template: "{{as_timestamp(now()) - as_timestamp(state_attr('script.sonos_pauze_spreek', 'last_triggered')) | float > 200 }}"
      - condition: template
        value_template: "{{as_timestamp(now()) - as_timestamp(state_attr('script.sonos_playing_spreek', 'last_triggered')) | float > 200 }}"
  action:
    - service: script.sonos_pauze_spreek
      data_template:
        sonos_entity: media_player.keuken
        volume: 0.55
        delay: '00:00:08'
        speech_message: >
            {{ [
            "Hallo allemaal, welkom thuis.",
            "Hallo allemaal, blij dat jullie veilig thuis geraakt zijn.",
            "De koning en zijn koningin zijn terug thuis.",
            "Blij dat jullie thuis zijn. ",
            "De koning en zijn rechterhand zijn terug.",
            "Als er niets gebeurt, moet er eerst iets gebeuren, voordat er iets gebeurt,. Dus moet je eerst iets laten gebeuren,. En dat is logisch."
            ] | random }}
